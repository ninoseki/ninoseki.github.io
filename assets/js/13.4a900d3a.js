(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{294:function(t,a,e){"use strict";e.r(a);var r=e(10),s=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"page-title"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#page-title"}},[t._v("#")]),t._v(" "+t._s(t.$page.title))]),t._v(" "),a("p",[a("span",{staticStyle:{color:"#999"}},[t._v(t._s(t.$page.readingTime.text)+"...")])]),t._v(" "),a("h2",{attrs:{id:"概要"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概要"}},[t._v("#")]),t._v(" 概要")]),t._v(" "),a("p",[t._v("PHP の Web アプリ開発者は、フロントエンド側で Web アプリのデバッグをしたいという人が多いようです。")]),t._v(" "),a("p",[t._v("具体的にいうと下記は CakePHP の Web デバッグ機能である DebugKit の実行例です。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://book.cakephp.org/3.0/ja/_images/history-panel-use.gif",alt:"CakePHP"}})]),t._v(" "),a("p",[t._v("こういった Web デバッグ機能を有名所のフレームワークは自前で備えています。")]),t._v(" "),a("ul",[a("li",[t._v("CakePHP: "),a("a",{attrs:{href:"https://github.com/cakephp/debug_kit",target:"_blank",rel:"noopener noreferrer"}},[t._v("DebugKit"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("CodeIgniter: "),a("a",{attrs:{href:"https://www.codeigniter.com/userguide3/general/profiling.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Profiler"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("FuelPHP: "),a("a",{attrs:{href:"https://fuelphp.com/docs/general/profiling.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Profilling"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("Symphony: "),a("a",{attrs:{href:"https://symfony.com/doc/master/page_creation.html#the-web-debug-toolbar-debugging-dream",target:"_blank",rel:"noopener noreferrer"}},[t._v("WebDebugToolbar"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/maximebf/php-debugbar",target:"_blank",rel:"noopener noreferrer"}},[t._v("PHP Debug Bar"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("Web デバッグ機能は開発環境ではとても便利ですが、本番環境では絶対に有効化していはいけません。")]),t._v(" "),a("p",[t._v("本番環境で有効化していると、以下のようなリスクがあります。")]),t._v(" "),a("ul",[a("li",[t._v("機微情報(ID. PW など)が第三者に閲覧されてしまう")]),t._v(" "),a("li",[t._v("実行した SQL が第三者に閲覧されてしまう")]),t._v(" "),a("li",[t._v("アクセスログが第三者に閲覧されてしまう")]),t._v(" "),a("li",[t._v("その他 Web アプリ、Web サーバーの設定が第三者に閲覧されてしまう")])]),t._v(" "),a("p",[t._v("本番環境で Web デバッグ機能を有効にするやつなんているか?そう思われたあなた。これが結構いるのです。日本国内の事例に限っても軽く 100 件以上を私は見つけました。")]),t._v(" "),a("p",[t._v("実際にどのような事例があったのか、簡単に紹介しましょう。")]),t._v(" "),a("h3",{attrs:{id:"cakephp-の例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cakephp-の例"}},[t._v("#")]),t._v(" CakePHP の例")]),t._v(" "),a("p",[t._v("Facebook 関連のキーや DB の資格情報が丸見え。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/fFnsGTl.png",alt:"Imgur"}})]),t._v(" "),a("p",[t._v("実行した SQL クエリが丸見え。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/qVqCYVZ.png",alt:"Imgur"}})]),t._v(" "),a("h3",{attrs:{id:"codeigniter-の例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#codeigniter-の例"}},[t._v("#")]),t._v(" CodeIgniter の例")]),t._v(" "),a("p",[t._v("SMTP の資格情報が丸見え。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/9fmONl2.png",alt:"Imgur"}})]),t._v(" "),a("h3",{attrs:{id:"fuelphp-の例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fuelphp-の例"}},[t._v("#")]),t._v(" FuelPHP の例")]),t._v(" "),a("p",[t._v("DB の資格情報が丸見え。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/vRkt2BF.png",alt:"Imgur"}})]),t._v(" "),a("p",[t._v("プライバシーマークとは・・・。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/sEKPk1y.png",alt:"Imgur"}})]),t._v(" "),a("h3",{attrs:{id:"symphony-の例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#symphony-の例"}},[t._v("#")]),t._v(" Symphony の例")]),t._v(" "),a("p",[t._v("アクセスログが丸見え。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/xP4HeZA.png",alt:"Imgur"}})]),t._v(" "),a("h3",{attrs:{id:"php-debug-bar-の例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#php-debug-bar-の例"}},[t._v("#")]),t._v(" PHP Debug Bar の例")]),t._v(" "),a("p",[t._v("実行した SQL クエリが丸見え。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/murMZuM.png",alt:"Imgur"}})]),t._v(" "),a("h2",{attrs:{id:"まとめ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#まとめ"}},[t._v("#")]),t._v(" まとめ")]),t._v(" "),a("p",[t._v("この件について tweet していたところ、CakePHP の Core Developer である Jose Diaz-Gonzalez(@savant)からリプライをもらいました。")]),t._v(" "),a("blockquote",{staticClass:"twitter-tweet",attrs:{"data-lang":"en"}},[a("p",{attrs:{lang:"en",dir:"ltr"}},[t._v("We don't enable this in production mode, but would be interested in hearing any suggestions for making this harder to unsecure :)")]),t._v("— Jose Diaz-Gonzalez (@savant) "),a("a",{attrs:{href:"https://twitter.com/savant/status/969101233519775744?ref_src=twsrc%5Etfw"}},[t._v("March 1, 2018")])]),t._v(" "),a("script",{attrs:{async:"",src:"https://platform.twitter.com/widgets.js",charset:"utf-8"}}),t._v(" "),a("p",[t._v("そうです。単純に本番環境(production mode)で Web デバッグ機能を有効にしなければいいだけなのです。注意しましょう。")]),t._v(" "),a("p",[t._v("また、Web アプリのデプロイ後に Web デバッグ機能が有効になっていないか確認するのもいいかもしれません。")]),t._v(" "),a("p",[t._v("CakePHP の場合、以下のような"),a("code",[t._v("#debug-kit-toolbar")]),t._v("の要素がないか確認してみれば、Web デバッグ機能が有効になっているかどうか判断することができます。")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("debug-kit-toolbar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  // 省略\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("h2",{attrs:{id:"備考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#備考"}},[t._v("#")]),t._v(" 備考")]),t._v(" "),a("p",[a("strong",[t._v("Note:")]),t._v(" 今回自分が発見したものについては、適時しかるべきところに報告をしているところです。🙏")])])}),[],!1,null,null,null);a.default=s.exports}}]);